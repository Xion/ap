# API documentation

All the API functions available to expressions are described in this chapter.

<!-- BEGIN AUTOGENERATED API DOCUMENTATION - DO NOT MODIFY (RUN `inv build.docs` INSTEAD) -->
## functools

API related to functions and "functional" programming.

### identity(value)

Identity function.
### flip(value)

Create a function that invokes given one with arguments reversed.
### map(func, array, context)

Map a function over an array.Returns the array created by applying the function to each element.
### filter(func, array, context)

Filter an array through a predicate function.This is the opposite of reject().
Returns the array created by applying the function to each elementand preserving only those for it returned a truthy value.
### reject(func, array, context)

Reject array elements that do not satisfy a predicate.This the opposite of filter().
Returns the array created by applying the function to each elementand preserving only those for it returned a falsy value.
### reduce(func, array, start, context)

Apply a binary function cumulatively to array elements.Also known as the "fold" operation (left fold, to be precise).

## base

Base API functions.

This is mostly a grab bag of functions that don't really fit anywhere else,
or are singularly "fundamental" to the expression language.

### len(value)

Compute the length of given value (an array or a string).
### rev(value)

Reverse the value.
For strings. this reverses the order of characters (Unicode grapheme clusters, to be precise).For arrays, the result is an array with reversed elements.
For objects, the result is an inverted object, i.e. one where values from inputmap back to keys. If there is more than one value for any given key,it is undefined which one will be present in the result.
### keys(value)

Return an array of object's keys.If a string or array is passed, an array of indices is returned.
### values(value)

Return an array of object's values.
### pick(keys, from)

Pick only the values from given collection that match the keys.Keys should be given as an array.Source collection can be:* an array (with element indices as keys)* an object* a string (with character indices as keys)
### omit(keys, from)

Opposite of pick(). Preserves only the values from given collectionswhose keys/indices *don't* match the keys/indices from given array.Source collection can be:* an array (with element indices as keys)* an object* a string (with character indices as keys)
### index(elem, seq)

Find an index of given element inside a sequence.Returns an empty value if the element couldn't be found.
### sort(array)

Sort the array using a default comparison method.
The only kinds of sortable values are numbers (integers & floats (sans NaN))and strings (alphabetically). They do not compare to each other, though.
Returns the array after sorting.
### sort_by(array, cmp, context)

Sort the array using a comparator.
The comparator should be a function that takes two values and returns:* a negative number - if the first value is lower than the second one* zero - if the both values are equal* a positive number - if the first value is greater than the second one
Returns the array after sorting.

## random

Functions related to random number generation.

### rand()


### shuffle(value)

Shuffle the elements of an array or characters in a string.
### sample(size, source)

Pick a sample of given size among the values from a collection.Returns the array of picked elements.

## itertools

Iteration-related API functions.

### all(value)

Returns true if all elements of an array are truthy (as per bool() functions).Note that if the array is empty, it also returns true.
### any(value)

Returns true if at least one element of the array is truthy(as per the bool() function).
### min(value, context)

Find a minimum value in the array. Returns nil for empty arrays.
### max(value, context)

Find a maximum value in the array. Returns nil for empty arrays.
### sum(value, context)

Return a sum of all elements in an array.
### compact(array)

Returns the array with all falsy values removed.This is determined via the bool() conversion.

## conv

Conversion functions.

### bool(value)

Convert a value to a boolean, based on its "truthy" value.
NOTE: This conversion is used by logical (!, &&, ||) and conditional (:?)operators to coerce values to boolean whenever necessary.
### int(value)

Convert a value to an integer.
### float(value)

Convert a value to a float.
### str(value)

Convert a value to string.
### regex(value)

Convert a value to a regular expression.If not a string, the value will be stringified first.
### csv(value)

Converts a value to or from CSV:* string input is converted from CSV into an array (of arrays) of strings* array input is converted to CSV string
### json(value)

Converts a value to or from JSON:* an array or object input is converted to JSON string* a string input is parsed as JSON

## math

Math functions.

### abs(value)

Compute the absolute value of a number.
### sgn(value)

Compute the signum function.
### sqrt(value)

Compute a square root of a number.
### exp(value)

The exponential function.
### ln(value)

Natural logarithm (with respect to base 'e').
### floor(value)

Round a number down (towards negative infinity).
### ceil(value)

Round a number up (towards positive infinity).
### round(value)

Round a number to the nearest integer.
### trunc(value)

Return the integer part of the number (round towards zero).
### bin(value)

Convert an integer to a binary string.
### oct(value)

Convert an integer to an octal string.
### hex(value)

Convert an integer to a hexidecimal string.

## strings

String API available to expressions.

### chr(value)

Returns a one-character string with the character of given ordinal value.
### ord(value)

Returns the ordinal value for a single character in a string.
### chars(value)

Converts a string into an array of characters.Each character is represented as a string of length 1.
### utf8(value)

Converts a string into an array of UTF8 bytes.Each byte is represented as its integer value.
### format(fmt, arg)

Peforms string formatting a'la Python str.format().
### before(needle, haystack)

Return part of a string ("haystack") before given one ("needle"),or empty string if not found.
### after(needle, haystack)

Return part of a string ("haystack") after given one ("needle"),or empty string if not found.
### trim(string)

Trim the string from whitespace characters at both ends.

## subst

String substitution functions.

### rot13(value)

Compute the ROT-13 "cipher" of a string.Characters outside of the a...z range (of either case) are left unchanged.
### deburr(value)

Deburrs the strings, removing diacratic marks and accents from letters.
Technically, this is done by converting the string to its Unicode Normalized Form KDand removing all the "Mark, Nonspacing" (Mn) and "Mark, Spacing Combining" (Mc) characters.
### latin1(value)

"Latinize" the string by translating it to a closest approximation of Latin letters.
This is done using the Text::Unidecode method that was original implemented in Perl(CPAN: http://search.cpan.org/%7Esburke/Text-Unidecode-1.23/lib/Text/Unidecode.pm)and is described in more detail here: http://interglacial.com/%7Esburke/tpj/as_html/tpj22.html
### sub(needle, replacement, haystack, ctx)

Substitute a given string or regex ("needle") with something else ("replacement")within given text ("haystack").
The replacement can be either another string, or -- in case of regex needle --a function accepting the values of regex captures and returning replacement string.
Returns the text after the substitutions has been made.
### sub1(needle, replacement, haystack, ctx)

Substitute the first occurrence of given string or regex ("needle")with something else ("replacement") within given text.
The replacement can be either another string, or -- in case of regex needle --a function accepting the values of regex captures and returning replacement string.
Returns the text after the substitution has been made.
### rsub1(needle, replacement, haystack)

Substitute the last occurrence of given string("needle")with another string ("replacement") within given text.
Returns the text after the substitution has been made.

## frag

API for blowing strings into fragments and putting them back together.

### join(delim, array)

Join an array of values into a single delimited string.
### split(delim, string)


### words(string)

Split a string into array of words.
### lines(string)

Split a string into array of lines.

<!-- END AUTOGENERATED API DOCUMENTATION -->